_import:"utilities_lib"


give_bank_update~{
	write~@WriteNF
	amount~int
	intro_text~str
	;~{
		write.{s:intro_text s:". You have $" d:amount s:" in the bank." endl}
	}
}




increase_urgency~{
	in~str
	;~{
		size~int:in.count
		n~int:0
		{n < size}?*{
			{in.getchar:n = 46}?{
				in.setchar.{char:33 at:n ;}
			}
			n:{n+1}
		}
	}
}

;~{
        print.{give_bank_update.{write:@$.2 amount:500 intro_text:"Attention" ;}}
        
        buff~bytes.50
        str.{
	        set_buffer:@buff
	        writer~write
	        give_bank_update.{write:@writer amount:5 intro_text:"Warning" ;}
	        increase_urgency:$
	        print.s:$
        }
}

