#Test for basic string manipulation
#Expected output:
#Attention. You have $500 in the bank.
#Warning! You have $5 in the bank!

_import:"utilities_lib"


give_bank_update~{
	write~@WriteNF
	amount~int
	intro_text~BufferString
	;~{
		write.{s:intro_text s:". You have $" d:amount s:" in the bank." endl}
	}
}




increase_urgency~{
	in~BufferString
	;~{
	        for.{
	                end:in.count
	                do:@{
	                        {in.get:i = "."}?{
	                                in.set.{el:"!" at:i ;}
	                        }
	                } ;
	        }
	}
}

;~{
        print.{give_bank_update.{write:@$.2 amount:500 intro_text:"Attention" ;}}
        
        buff~bytes.50
        BufferString.{
	        setBuffer:@buff
	        writer~write
	        give_bank_update.{write:@writer amount:5 intro_text:"Warning" ;}
	        increase_urgency:$
	        print.s:$
        }
}

