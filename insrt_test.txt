bytes~{
	c0~int c1~int c2~int c3~int c4~int c5~int
	
}


system~{
	
	~sysrun
	
	
	rax~int
	rdx~int
	rdi~int
	rsi~int
}
writeff~{


	write~{
		bn~@bytes
		fn~;
	}
}
print~{
	~writeff.write
	
	
	;~{
		
		system.{
			rax:0x2000004
			rsi:{bn+8}
			rdi:1
			rdx:bn.c0
			;
		}
	}
	s~{
		b~@bytes
		;~{
			bn:b
			;
		}
	}
	c~{
		in~int
		
		;~{
			b~bytes.{c0:8 c1:in}
			bn:@b
			;
		}
	}
	endl~{
		;~{
			c:10
		}
	}
	d~{
		in~int
		;~{
			intb~bytes
			p~@bytes:@intb
			p:{p+40}
			p.c0:{in%10+48}
			in:{in/10}
			p:{p-8}
			size~int:8
			{in}#{
				p.c0:{in%10+48}
				in:{in/10}
				p:{p-8}
				size:{size+8}
			}
			p.c0:size
			bn:p
			
			;
		}
	}
}

str~{
	b~@bytes
	setchar~{
		set~int
		
		char~int
		;~{
			p~@bytes:{b+{set*8}}
			p.c1:char
		}
	}
}

list~{
	b~@bytes
	each~{
		f~;
		;~{
			p~@bytes:b
			remaining~int:p.c0
			p:{p+8}
			{remaining}#{
				mbr~@bytes:p.c0
				mbr.{f}
				p:{p+8}
				remaining:{remaining-1}
			}
		}
	}
	
}


npair~{a~int b~int}







b1~npair.{a:0 b:1}
b2~npair.{a:2 b:5}
b3~npair.{a:0 b:5}
b4~npair.{a:2 b:7}
b5~npair.{a:4 b:1}
b0~bytes.{c0:5 c1:@b1 c2:@b2 c3:@b3 c4:@b4 c5:@b5}

l~list:@b0

l.each:@{
	np~@npair:$
	np.{
		print.d:{a+b}
	}
}

print.{
	hello~bytes.{c0:40 c1:72 c2:69 c3:76 c4:76 c5:79}
	msg~str:@hello
	s:msg
	msg.setchar.{char:70 set:1 ; set:2 ; set:3 ; set:4 ;}
	s:msg
	d:1749 c:102 d:0 c:90 endl
}


factorial~{
	in~int
	;~{
		out~int:1
		{in}?{
			{in-1}?{
				out:{in * factorial:{in-1}}
			}
		}
		out
	}
}


print.{d:factorial:7 endl}





